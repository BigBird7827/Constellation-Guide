
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stargazer's Club</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/satellite.js/4.0.0/satellite.min.js"></script>

	
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        .main-background {
            background: url('https://raw.githubusercontent.com/BigBird7827/Constellation-Guide/refs/heads/main/Constellation%20Guide%20Background.jpg') no-repeat center center fixed;
            background-size: cover;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            text-align: center;
            position: relative;
        }

        #detail-page {
            background: url('https://www.thoughtco.com/thmb/S17pmrJRniYPKsjcJjdT4x50-2Y=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/constellations-and-names-and-asterisms-58b82e3d5f9b58808097e2ac.jpg') no-repeat center center fixed;
            background-size: cover;
            height: 100%;
            display: none;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 20px;
            overflow-y: auto;
        }

        .detail-output {
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-width: 80%;
            margin: 20px auto;
        }

        .title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            text-transform: uppercase;
            color: #ffd700;
            text-shadow: 0 0 20px #ffd700, 0 0 40px #ffd700;
            margin-top: 20px;
            padding: 10px;
            border: 2px solid black;
            display: inline-block;
            background-color: rgba(0, 0, 0, 0.6);
            text-align: center;
            width: 100%;
        }

        .explore-button {
            background: black;
            color: #ffd700;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            padding: 10px 20px;
            border: 1px solid #666;
            border-radius: 20px;
            cursor: pointer;
            text-transform: uppercase;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.5);
            margin-top: 20px;
        }

        .dropdown-container {
            margin: 20px auto;
            max-width: 60%;
            text-align: center;
            display: flex;
            justify-content: center;
        }

        .dropdown-select {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            padding: 10px;
            border: 2px solid #ffd700;
            border-radius: 10px;
            background: black;
            color: #ffd700;
            width: auto;
            min-width: 300px;
            text-transform: uppercase;
            cursor: pointer;
        }

        .constellation-image {
            max-width: 80%;
            height: auto;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .content {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            color: #fff;
            font-size: 1.2rem;
            max-width: 80%;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.9);
        }

        .description {
            background: rgba(0, 0, 0, 0.6);
            padding: 20px;
            margin: 20px auto;
            max-width: 80%;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.5);
            line-height: 1.8;
            color: #fff;
            text-align: left;
            white-space: pre-line;
        }

        .description span.header {
            color: #ffd700;
            font-size: 1.4rem;
            font-weight: bold;
            display: inline;
        }

        .button-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .star-chart-page {
            background: url('https://raw.githubusercontent.com/BigBird7827/Constellation-Guide/refs/heads/main/Constellation%20Guide%20Background.jpg') no-repeat center center fixed;
            background-size: cover;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .subtitle {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: #ffd700;
            text-shadow: 0 0 10px #ffd700, 0 0 20px #ffd700;
            margin-bottom: 20px;
        }

        .star-chart-image {
            max-width: 50%;
            height: auto;
            margin-top: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .glossary-page {
            background: url('https://raw.githubusercontent.com/BigBird7827/Constellation-Guide/refs/heads/main/Constellation%20Guide%20Background.jpg') no-repeat center center fixed;
            background-size: cover;
            height: 100%;
            display: none;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 20px;
            overflow-y: auto;
        }

        .search-container {
            margin-bottom: 20px;
        }

        .search-input {
            width: 60%;
            padding: 10px;
            font-size: 1.8rem;
            border: 2px solid #ffd700;
            border-radius: 5px;
            background-color: black;
            color: #ffd700;
        }

        .glossary-container {
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-width: 80%;
            color: white;
            text-align: left;
        }

        .glossary-term {
            font-weight: bold;
            font-size: 1.4rem;
            color: #ffd700;
            margin-bottom: 10px;
        }

        #glossary-output > div {
            font-size: 1.45rem;
            line-height: 1.8;
        }

        .related-term {
            font-size: 1.4rem;
            color: #ffd700;
            text-decoration: underline;
            cursor: pointer;
        }

        .related-term:hover {
            color: #ffffff;
        }

        .related-terms {
            margin-top: 10px;
            font-size: 1.4rem;
        }

        #solar-system-page {
            display: none;
            height: 100%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 100;
        }

        iframe.solar-system-simulation {
            width: 100%;
            height: 100%;
            border: none;
        }

        .iss-tracker-page {
            display: none;
            background: url('https://raw.githubusercontent.com/BigBird7827/Constellation-Guide/refs/heads/main/Constellation%20Guide%20Background.jpg') no-repeat center center fixed;
            background-size: cover;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            text-align: center;
        }

        #map {
    flex-grow: 1;
    height: calc(100% - 120px); /* Adjust as needed */
    width: 100%;
}

        .info-box {
    position: absolute;
    bottom: 20px;
    left: 20px;
    background-color: rgba(0, 0, 0, 0.8);
    color: #fff;
    padding: 10px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    font-size: 1rem;
    z-index: 1000;
    max-width: 300px;
}


        .info-box strong {
            color: #ffd700;
        }

        .return-button {
            background: black;
            color: #ffd700;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            padding: 10px 20px;
            border: 1px solid #666;
            border-radius: 20px;
            cursor: pointer;
            text-transform: uppercase;
        }

    </style>
</head>

<body>
    <div id="main-page" class="main-background">
    <div class="header">
        <div class="title">Stargazer's Club</div>
    </div>
    <button class="explore-button" onclick="startStarTrekQuiz()">Star Trek Quiz</button>
    <div class="content">
        <p>The night sky has fascinated and inspired humanity for generations. Constellations not only light up the heavens but are steeped in history and rich mythology. At Stargazer's Club, we make it simple and exciting to explore their beauty and uncover their stories.</p>
        <p>Learn about the constellations, their history, and their place in the night sky. Then, take your exploration further with our Solar System Simulator. Visit out Sun and each planet in our Solar System. Utilize our extensive glossary of astronomy terminology, and when you're done and want to have some fun, play our Star Trek Trivia Quiz. But heed our warning - This is the hardest Star Trek quiz you've ever taken. Good Luck!</p>
    </div>
    <div class="button-container">
        <button class="explore-button" onclick="showDropdown()">Explore Constellations</button>
        <button class="explore-button" onclick="showStarChartPage()">Create a Star Chart</button>
        <button class="explore-button" onclick="showGlossary()">Glossary of Terms</button>
        <button class="explore-button" onclick="showSolarSystem()">Solar System Simulation</button>
        <button class="explore-button" onclick="showISSTracker()">ISS Tracker</button>
    </div>
</div>

<div id="detail-page" class="detail-page" style="display: none;">
    <div class="detail-output" id="detail-content"></div>
    <div class="button-container">
        <button class="explore-button" onclick="returnToDropdown()">Return to Dropdown</button>
        <button class="explore-button" onclick="returnToMenu()">Return to Menu</button>
    </div>
</div>

<div id="star-chart-page" class="star-chart-page" style="display: none;">
    <div class="title">Create a Custom Star Chart</div>
    <div class="subtitle">(based on your location)</div>
    <div id="star-chart"></div>
    <div class="button-container">
        <button class="explore-button" onclick="getUserLocation()">Generate Star Chart</button>
        <button class="explore-button" onclick="printStarChart()">Print Star Chart</button>
        <button class="explore-button" onclick="returnToMenu()">Return to Menu</button>
    </div>
</div>

<div id="glossary-page" class="glossary-page" style="display: none;">
    <div class="title">Glossary of Terms</div>
    <div class="search-container">
        <input id="search-input" class="search-input" type="text" placeholder="Search for a term..." oninput="handleSearch()">
    </div>
    <div class="dropdown-container">
        <select id="glossary-dropdown" class="dropdown-select" onchange="showDefinitionFromDropdown()">
            <option value="">Select a term</option>
        </select>
    </div>
    <div id="glossary-output" class="glossary-container"></div>
    <div class="button-container">
        <button class="explore-button" onclick="returnToMenu()">Return to Menu</button>
    </div>
</div>

<div id="solar-system-page">
    <iframe class="solar-system-simulation" src="" id="solar-system-iframe"></iframe>
    <button class="explore-button" onclick="returnToMenu()">Return to Menu</button>
</div>

<div id="iss-tracker-page" class="iss-tracker-page" style="display: none;">
    <div id="map" style="position: relative; height: 100%;"></div>
    <div class="info-box" id="iss-info">
        Fetching ISS data...
    </div>
</div>
</div>

<div id="iss-info" class="info-box" style="display: none; left: 20px;">
    Fetching ISS data...
</div>

<div id="next-pass-info" class="info-box" style="display: none; right: 20px; left: auto;">
    Fetching next pass data...
</div>

    <script>
        const JSON_URL = 'https://raw.githubusercontent.com/BigBird7827/Stargazers-Club/refs/heads/main/Constellation%20Data.json';
const GLOSSARY_URL = 'https://raw.githubusercontent.com/BigBird7827/Stargazers-Club/refs/heads/main/Glossary%20of%20Terms.json';
const SOLAR_SYSTEM_URL = 'https://bigbird7827.github.io/Solar-System/';

let constellationData = [];
let glossaryData = [];

const TLE_URL = 'https://celestrak.com/NORAD/elements/stations.txt';

async function fetchTLE() {
    const response = await fetch(TLE_URL);
    const text = await response.text();
    const lines = text.split('\n');
    const issIndex = lines.findIndex(line => line.startsWith('ISS (ZARYA)'));
    return [lines[issIndex + 1].trim(), lines[issIndex + 2].trim()];
}

async function getISSPosition(tle) {
    const [tleLine1, tleLine2] = tle;
    const satrec = satellite.twoline2satrec(tleLine1, tleLine2);
    const now = new Date();
    const positionAndVelocity = satellite.propagate(satrec, now);

    if (positionAndVelocity.position) {
        const gmst = satellite.gstime(now);
        const geodeticCoords = satellite.eciToGeodetic(positionAndVelocity.position, gmst);
        const latitude = satellite.degreesLat(geodeticCoords.latitude);
        const longitude = satellite.degreesLong(geodeticCoords.longitude);
        const altitude = geodeticCoords.height;

        return {
            latitude: latitude.toFixed(2),
            longitude: longitude.toFixed(2),
            altitude: altitude.toFixed(2),
            dateTime: now.toLocaleString()
        };
    }

    return null;
}

function calculateElevation(observer, satellite) {
    const observerVector = [
        Math.cos(observer.latitude) * Math.cos(observer.longitude),
        Math.cos(observer.latitude) * Math.sin(observer.longitude),
        Math.sin(observer.latitude)
    ];
    const satelliteVector = [
        Math.cos(satellite.latitude) * Math.cos(satellite.longitude),
        Math.cos(satellite.latitude) * Math.sin(satellite.longitude),
        Math.sin(satellite.latitude)
    ];
    const dotProduct = observerVector[0] * satelliteVector[0] +
                       observerVector[1] * satelliteVector[1] +
                       observerVector[2] * satelliteVector[2];
    return Math.asin(dotProduct) * (180 / Math.PI);
}

function calculateNextPass(tle, userLat, userLng) {
    const [tleLine1, tleLine2] = tle;
    const satrec = satellite.twoline2satrec(tleLine1, tleLine2);
    const now = new Date();

    let riseTime = null;
    let setTime = null;
    let maxElevation = 0;
    let duration = 0;

    const observerGd = {
        latitude: satellite.degreesToRadians(userLat),
        longitude: satellite.degreesToRadians(userLng),
        height: 0
    };

    for (let i = 0; i < 24 * 60 * 60; i += 10) {
        const time = new Date(now.getTime() + i * 1000);
        const positionAndVelocity = satellite.propagate(satrec, time);
        if (!positionAndVelocity.position) continue;

        const gmst = satellite.gstime(time);
        const positionGd = satellite.eciToGeodetic(positionAndVelocity.position, gmst);

        const elevation = calculateElevation(observerGd, positionGd);

        if (elevation > 0 && !riseTime) {
            riseTime = time;
        } else if (elevation <= 0 && riseTime && !setTime) {
            setTime = time;
            break;
        }

        if (elevation > maxElevation) {
            maxElevation = elevation;
        }
    }

    if (riseTime && setTime) {
        duration = Math.round((setTime - riseTime) / 1000);
        return {
            riseTime: riseTime.toLocaleTimeString(),
            setTime: setTime.toLocaleTimeString(),
            date: riseTime.toLocaleDateString(),
            duration,
            maxElevation: maxElevation.toFixed(2)
        };
    }

    return null;
}

async function updateISSData(tle) {
    const issData = await getISSPosition(tle);
    const infoBox = document.getElementById('iss-info');

    if (issData) {
        infoBox.innerHTML = `
            <div><strong>Date and Time:</strong> ${issData.dateTime}</div>
            <div><strong>Latitude:</strong> ${issData.latitude}</div>
            <div><strong>Longitude:</strong> ${issData.longitude}</div>
            <div><strong>Altitude:</strong> ${issData.altitude} km</div>
        `;
    }
}

async function updateNextPass(tle, userLat, userLng) {
    const nextPass = calculateNextPass(tle, userLat, userLng);
    const nextPassInfo = document.getElementById('next-pass-info');

    if (nextPass) {
        nextPassInfo.innerHTML = `
            <div><strong>Next Pass Details:</strong></div>
            <div><strong>Date:</strong> ${nextPass.date}</div>
            <div><strong>Rise Time:</strong> ${nextPass.riseTime}</div>
            <div><strong>Set Time:</strong> ${nextPass.setTime}</div>
            <div><strong>Duration:</strong> ${nextPass.duration} seconds</div>
            <div><strong>Max Elevation:</strong> ${nextPass.maxElevation}°</div>
        `;
    } else {
        nextPassInfo.innerHTML = `<div>No next pass data available.</div>`;
    }
}

function setupISSMap(userLat, userLng, tle) {
    const map = L.map('map').setView([userLat, userLng], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    const issIcon = L.icon({
        iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/d/d0/International_Space_Station.svg',
        iconSize: [50, 50],
        iconAnchor: [25, 25]
    });

    const userIcon = L.icon({
        iconUrl: 'https://cdn-icons-png.flaticon.com/512/3177/3177361.png',
        iconSize: [30, 30],
        iconAnchor: [15, 15]
    });

    const issMarker = L.marker([0, 0], { icon: issIcon }).addTo(map);
    L.marker([userLat, userLng], { icon: userIcon }).addTo(map);
    const path = L.polyline([], { color: 'blue', weight: 2 }).addTo(map);
    let userInteracted = false;

    map.on('zoomstart', () => { userInteracted = true; });
    map.on('movestart', () => { userInteracted = true; });

    async function updateISSMarker() {
        const issData = await getISSPosition(tle);
        if (issData) {
            const latLng = [parseFloat(issData.latitude), parseFloat(issData.longitude)];
            if (!isNaN(latLng[0]) && !isNaN(latLng[1])) {
                issMarker.setLatLng(latLng);
                path.addLatLng(latLng);
                if (!userInteracted) map.setView(latLng);
            }
        }
    }

    setInterval(updateISSMarker, 5000);
}

async function showISSTracker() {
    const tle = await fetchTLE();
    document.getElementById('main-page').style.display = 'none';
    document.getElementById('iss-tracker-page').style.display = 'flex';

    const issInfoBox = document.getElementById('iss-info');
    const nextPassInfoBox = document.getElementById('next-pass-info');

    issInfoBox.style.display = 'block';
    nextPassInfoBox.style.display = 'block';

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(async (position) => {
            const userLat = position.coords.latitude;
            const userLng = position.coords.longitude;
            setupISSMap(userLat, userLng, tle);
            updateISSData(tle);
            setInterval(() => updateISSData(tle), 5000);
            await updateNextPass(tle, userLat, userLng);
        }, async () => {
            const defaultLat = 0;
            const defaultLng = 0;
            setupISSMap(defaultLat, defaultLng, tle);
            updateISSData(tle);
            setInterval(() => updateISSData(tle), 5000);
            await updateNextPass(tle, defaultLat, defaultLng);
        });
    }
}

async function fetchConstellationData() {
    try {
        const response = await fetch(JSON_URL);
        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
        constellationData = await response.json();
    } catch (error) {
        console.error('Error fetching constellation data:', error);
    }
}

async function fetchGlossaryData() {
    try {
        const response = await fetch(GLOSSARY_URL);
        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
        glossaryData = await response.json();
        populateGlossaryDropdown();
    } catch (error) {
        console.error('Error fetching glossary data:', error);
    }
}

async function showDropdown() {
    if (!constellationData || constellationData.length === 0) {
        await fetchConstellationData();
    }
    document.getElementById('main-page').style.display = 'none';
    document.getElementById('detail-page').style.display = 'flex';

    const dropdownHTML = `
        <div class="dropdown-container">
            <select id="constellation-select" class="dropdown-select" onchange="handleDropdownChange()">
                <option value="">Select a Constellation</option>
            </select>
        </div>
    `;
    document.getElementById('detail-content').innerHTML = dropdownHTML;
    populateDropdown();
    document.querySelector('.explore-button[onclick="returnToDropdown()"]').style.display = 'none';
}

function populateDropdown() {
    const selectElement = document.getElementById('constellation-select');
    if (!constellationData || constellationData.length === 0) return;

    constellationData.forEach(constellation => {
        const option = document.createElement('option');
        option.value = constellation['Constellation Name'];
        option.textContent = constellation['Constellation Name'];
        selectElement.appendChild(option);
    });
}

function handleDropdownChange() {
    const selectedConstellation = document.getElementById('constellation-select').value;
    if (!selectedConstellation) return;

    const constellation = constellationData.find(
        item => item['Constellation Name'] === selectedConstellation
    );

    displayConstellationDetails(constellation);
}

function displayConstellationDetails(constellation) {
    const detailContent = `
        <h2 class="title">${constellation['Constellation Name']}</h2>
        <img src="${constellation['Image']}" class="constellation-image" alt="${constellation['Constellation Name']}">
        <div class="description">
            <span class="header">Details:</span><br>${constellation['Details']}<br>
            <span class="header">Location and Visibility:</span><br>${constellation['Location and Visibility']}<br>
            <span class="header">Mythological Background:</span><br>${constellation['Mythological Background']}<br>
            <span class="header">Notable Stars:</span><br>${constellation['Notable Stars']}<br>
            <span class="header">Deep-Sky Objects:</span><br>${constellation['Deep-Sky Objects']}<br>
            <span class="header">Meteor Showers:</span><br>${constellation['Meteor Showers']}<br>
            <span class="header">Observation Tips:</span><br>${constellation['Observation Tips']}<br>
            <span class="header">Astronomical Importance:</span><br>${constellation['Astronomical Importance']}
        </div>
    `;
    document.getElementById('detail-content').innerHTML = detailContent;
    document.querySelector('.explore-button[onclick="returnToDropdown()"]').style.display = 'block';
}

function returnToDropdown() {
    showDropdown();
}

function showStarChartPage() {
    document.getElementById('main-page').style.display = 'none';
    document.getElementById('star-chart-page').style.display = 'flex';
}

document.addEventListener('DOMContentLoaded', fetchConstellationData);

function returnToMenu() {
    document.getElementById('main-page').style.display = 'flex';
    document.getElementById('detail-page').style.display = 'none';
    document.getElementById('glossary-page').style.display = 'none';
    document.getElementById('star-chart-page').style.display = 'none';
    document.getElementById('solar-system-page').style.display = 'none';
    document.getElementById('iss-tracker-page').style.display = 'none';
}

function getUserLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            position => {
                const latitude = position.coords.latitude.toFixed(2);
                const longitude = position.coords.longitude.toFixed(2);
                generateStarChart(latitude, longitude);
            },
            error => {
                alert("Unable to retrieve location. Please enable location services.");
            }
        );
    } else {
        alert("Geolocation is not supported by your browser.");
    }
}

function generateStarChart(latitude, longitude) {
    const embedUrl = `https://virtualsky.lco.global/embed/index.html?longitude=${longitude}&latitude=${latitude}&projection=stereo&constellations=true&constellationlabels=true&meteorshowers=true&showstarlabels=true&scalestars=2&live=true`;
    displayStarChart(embedUrl);
}

function displayStarChart(embedUrl) {
    const starChartContainer = document.getElementById('star-chart');
    starChartContainer.innerHTML = `
        <iframe 
            width="1000" 
            height="800" 
            frameborder="0" 
            scrolling="no" 
            marginheight="0" 
            marginwidth="0" 
            src="${embedUrl}" 
            allowTransparency="true">
        </iframe>`;
}

function printStarChart() {
    const embedUrl = "https://virtualsky.lco.global/embed/index.html?longitude=-119.86286000000001&latitude=34.4326&projection=stereo&constellations=true&constellationlabels=true&meteorshowers=true&showstarlabels=true&scalestars=2&live=true";
    const newWindow = window.open('', '_blank');
    newWindow.document.write(`
        <iframe 
            width="1000" 
            height="800" 
            frameborder="0" 
            scrolling="no" 
            marginheight="0" 
            marginwidth="0" 
            src="${embedUrl}" 
            allowTransparency="true">
        </iframe>`);
    newWindow.print();
}

function showGlossary() {
    document.getElementById('main-page').style.display = 'none';
    document.getElementById('glossary-page').style.display = 'flex';
    fetchGlossaryData();
}

function populateGlossaryDropdown() {
    const dropdown = document.getElementById('glossary-dropdown');
    dropdown.innerHTML = '<option value="">Select a term</option>';
    glossaryData.forEach(term => {
        const option = document.createElement('option');
        option.value = term.Term;
        option.textContent = term.Term;
        dropdown.appendChild(option);
    });
}

function showDefinitionFromDropdown() {
    const selectedTerm = document.getElementById('glossary-dropdown').value;
    if (!selectedTerm) return;
    const termData = glossaryData.find(term => term.Term === selectedTerm);
    displayDefinition(termData);
}

function handleSearch() {
    const query = document.getElementById('search-input').value.toLowerCase();
    const matchedTerm = glossaryData.find(term => term.Term.toLowerCase().includes(query));
    displayDefinition(matchedTerm);
}

function displayDefinition(termData) {
    const output = document.getElementById('glossary-output');
    if (termData) {
        const relatedTerms = Object.keys(termData)
            .filter(key => key.startsWith('Related Term') && termData[key])
            .map(key => {
                if (termData[key] === 'There are no related terms for this item') {
                    return `<span>${termData[key]}</span>`;
                }
                return `<a href="#" class="related-term" onclick="showRelatedTerm('${termData[key]}')">${termData[key]}</a><br>`;
            })
            .join('');
        output.innerHTML = `
            <div class="glossary-term">${termData.Term}</div>
            <div>${termData.Definition}</div>
            ${relatedTerms ? `<br><div class="related-terms"><strong>Related Terms:</strong><br>${relatedTerms}</div>` : ''}`;
    } else {
        output.innerHTML = '<div>No matching term found.</div>';
    }
}

function showRelatedTerm(termName) {
    const relatedTermData = glossaryData.find(term => term.Term === termName);
    if (relatedTermData) {
        displayDefinition(relatedTermData);
    } else {
        document.getElementById('glossary-output').innerHTML = `<div>Definition for "${termName}" not found.</div>`;
    }
    scrollToTop();
}

function scrollToTop() {
    const glossaryPage = document.getElementById('glossary-page');
    if (glossaryPage) {
        glossaryPage.scrollTo({ top: 0, behavior: 'smooth' });
    } else {
        document.documentElement.scrollTo({ top: 0, behavior: 'smooth' });
        document.body.scrollTo({ top: 0, behavior: 'smooth' });
    }
}

function showSolarSystem() {
    document.getElementById('main-page').style.display = 'none';
    const solarSystemPage = document.getElementById('solar-system-page');
    const iframe = document.getElementById('solar-system-iframe');
    iframe.src = SOLAR_SYSTEM_URL;
    solarSystemPage.style.display = 'block';
}

function startStarTrekQuiz() {
    window.location.href = "https://bigbird7827.github.io/ST-Trivia/";
}


    </script>
</body>

</html>
